(()=>{"use strict";var e={387:(e,t,n)=>{n.r(t)},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}},866:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(194),a=n(435),o=n(49),r=n(963),l=n(638),d=n(835),c=n(802),u=n(47);t.App=class{constructor(e){this.rootElement=e,this.header=new o.Header,this.game=new s.Game,this.timer=new a.Timer,this.aboutPage=new r.About,this.scorePage=new l.Score,this.settingsPage=new d.Settings,this.popup=new c.Popup,this.winMessage=new u.WinMessage,""===this.rootElement.innerHTML&&(this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.aboutPage.element),this.rootElement.appendChild(this.popup.element))}startGame(){return i(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[1],n=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(n)}))}routing(){const e=[{name:"Score",component:()=>{this.rootElement.innerHTML="",this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.scorePage.element),this.rootElement.appendChild(this.popup.element)}},{name:"Settings",component:()=>{this.rootElement.innerHTML="",this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.settingsPage.element),this.rootElement.appendChild(this.popup.element)}},{name:"Play",component:()=>{this.rootElement.innerHTML="",this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.timer.element),this.rootElement.appendChild(this.game.element),this.game.element.classList.add("field-wrapper"),this.startGame(),this.rootElement.appendChild(this.popup.element),this.rootElement.appendChild(this.winMessage.element),this.game.closeWin()}}],t={name:"default",component:()=>{this.rootElement.innerHTML="",this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.aboutPage.element),this.rootElement.appendChild(this.popup.element)}};this.header.activeRout(),window.onpopstate=()=>{const n=window.location.hash.slice(1);(e.find((e=>e.name===n))||t).component()}}registrPopup(){this.popup.showPopup();const e=document.querySelector(".add-button"),t=document.querySelector(".play-link"),n=document.querySelector(".register-button");e&&e.addEventListener("click",(()=>{t&&t.classList.remove("button-hidden"),n&&n.classList.add("button-hidden")}))}}},861:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},709:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;const i=n(861);class s extends i.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n    <div class="card">\n          <div class="card__front" style="background-image:url('images/${e}')"></div>\n          <div class="card__back"></div>\n          <div class="state state-right none-state"></div>\n          <div class="state state-wrong none-state"></div>\n      </div>\n    `}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip(!1)}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}showRightСard(){var e;null===(e=this.element.querySelector(".state-right"))||void 0===e||e.classList.remove("none-state")}showWrongСard(){var e;null===(e=this.element.querySelector(".state-wrong"))||void 0===e||e.classList.remove("none-state")}deleteWrongСard(){var e;null===(e=this.element.querySelector(".state-wrong"))||void 0===e||e.classList.add("none-state")}}t.Card=s},687:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),3e4)}}t.CardsField=s},194:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const s=n(861),a=n(709),o=n(687),r=n(680),l=n(435),d=n(47);class c extends s.BaseComponent{constructor(){super(),this.isAnimation=!1,this.winCounter=0,this.timer=new l.Timer,this.cardsField=new o.CardsField,this.element.appendChild(this.cardsField.element),this.winMessage=new d.WinMessage}newGame(e){this.timer.stopTimer(),this.cardsField.clear();const t=e.concat(e).map((e=>new a.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(t),this.timer.startTimer()}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image?(this.activeCard.showWrongСard(),e.showWrongСard(),yield r.delay(1500),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack(),this.activeCard.deleteWrongСard(),e.deleteWrongСard()]),this.activeCard.deleteWrongСard(),e.deleteWrongСard()):(this.activeCard.showRightСard(),e.showRightСard(),this.winCounter+=1,8===this.winCounter&&this.winMessage.showWin()),this.activeCard=void 0,this.isAnimation=!1}}))}closeWin(){const e=document.querySelector(".win-popup"),t=document.querySelector(".close-button-win");t&&t.addEventListener("click",(()=>{e&&e.classList.remove("active")}))}}t.Game=c},49:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("header",["header"]),this.element.innerHTML='\n      <div class="header__wrapper">\n      <div class="logo">\n        <div class="logo-first">Match</div>\n        <div class="logo-second">Match</div>\n      </div>\n      <nav class="navigation">\n        <a href="#About" class="navigation__link active-section about-link">\n          <div class="icon-circle">\n            <div>?</div>\n          </div>\n          <div class="link">About Game</div>\n        </a>\n        <a href="#Score" class="navigation__link score-link">\n          <div class="icon-circle">\n            <i class="fas fa-star"></i>\n          </div>\n          <div class="link">Best Score</div>\n        </a>\n        <a href="#Settings" class="navigation__link setting-link">\n          <div class="icon-circle">\n            <i class="fas fa-cog"></i>\n          </div>\n          <div class="link">Game Settings</div>\n        </a>\n      </nav>\n      <div class="register-button">register new player</div>\n      <div class="game-buttons  playButtons button-hidden">\n        <a href="#Play" class="navigation__link play-link button-hidden">\n          <div class="icon-circle">\n            <i class="fas fa-play"></i>\n          </div>\n          <div class="link">PlAY</div>\n        </a>\n        <button class="stop-button button-hidden">STOP</button>\n      </div>\n    </div>\n    '}activeRout(){const e=this.element.querySelectorAll(".navigation__link"),t=this.element.querySelector(".about-link"),n=this.element.querySelector(".score-link"),i=this.element.querySelector(".setting-link"),s=this.element.querySelector(".play-link");function a(){e.forEach((e=>e.classList.remove("active-section")))}null!==t&&null!==n&&null!==i&&s&&(t.addEventListener("click",(()=>{a(),t.classList.add("active-section")})),n.addEventListener("click",(()=>{a(),n.classList.add("active-section")})),i.addEventListener("click",(()=>{a(),i.classList.add("active-section")})),s.addEventListener("click",(()=>{a(),s.classList.add("active-section")})))}}t.Header=s},802:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("div",["popup"]),this.element.innerHTML='\n    <div class="popup-content">\n      <div class="close-button">\n        <i class="fas fa-times"></i>\n      </div>\n      <div class="title-wrapper">\n        <h2>Registr new Player</h2>\n      </div>\n    <div class="two-column">\n      <div class="form">\n        <p class="label"> <span class="blue">*</span> First Name</p>\n        <input  class="name colortext" type="text" name="first-name" pattern="[A-Za-zА-Яа-я]+"\n         minlength="1" maxlength="10" required placeholder=" Enter your first name">\n        <p class="label"> <span class="blue">*</span> Last Name</p>\n        <input  class="name-last colortext" type="text" name="last-name"\n         pattern="[A-Za-zА-Яа-я]+"\n         minlength="1" maxlength="10" required placeholder=" Enter your last name">\n       <p class="label"><span class="blue">*</span> Email</p>\n       <input  class="email colortext" type="email" name="email" required placeholder=" Enter your email">\n     </div>\n     <div class="avatar-img"></div>\n    </div>\n    <div class="buttons">\n        <button type="submit" class="add-button button-hidden">Add User</button>\n        <button class="cancel-button">Cancel</button>\n     </div>\n    '}showPopup(){const e=document.querySelector(".cancel-button"),t=document.querySelector(".name"),n=document.querySelector(".name-last"),i=document.querySelector(".email"),s=document.querySelector(".register-button"),a=document.querySelector(".close-button"),o=document.querySelector(".popup"),r=document.querySelector(".add-button"),l=document.querySelector(".stop-button"),d=document.querySelector(".game-buttons");function c(){o&&o.classList.remove("active"),document.body.classList.remove("notScrollable")}function u(){t&&n&&i&&r&&(t.validity.valid&&n.validity.valid&&i.validity.valid?r.classList.remove("button-hidden"):r.classList.add("button-hidden"))}s&&s.addEventListener("click",(function(){o&&o.classList.add("active"),document.body.classList.add("notScrollable")})),a&&a.addEventListener("click",c),e&&e.addEventListener("click",(function(){t&&n&&i&&(t.value="",n.value="",i.value=""),c()})),t&&n&&i&&r&&(t.addEventListener("input",u),n.addEventListener("input",u),i.addEventListener("input",u)),r&&r.addEventListener("click",(()=>{l&&(l.classList.remove("button-hidden"),l.addEventListener("click",(()=>{alert("The game is paused, click OK to continue")}))),d&&d.classList.remove("button-hidden"),c()}))}}t.Popup=s},435:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("div",["timer"]),this.element.innerHTML='\n      <div class="timer__output">0:00</div>\n    ',this.timer=setInterval((()=>{}),1e3)}startTimer(){const e=document.querySelector(".timer__output");let t=3600;this.timer=setInterval((()=>{const n=t/60%60,i=(t%60).toLocaleString("en",{minimumIntegerDigits:2});e&&(e.innerHTML=`${Math.trunc(n)}:${i}`),t+=1}),1e3)}stopTimer(){clearInterval(this.timer)}}t.Timer=s},47:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinMessage=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("div",["win-popup"]),this.element.innerHTML='\n    <div class="win-content">\n      <div class="close-button-win">\n          <i class="fas fa-times"></i>\n      </div>\n      <p class="win-content__title">Congratulations! You successfully found all matches!</p>\n      <a class="win-content__button" href="#Score">OK</a>\n    </div>\n    '}showWin(){const e=document.querySelector(".win-popup"),t=document.querySelector(".close-button-win"),n=document.querySelector(".win-content__button");function i(){e&&e.classList.remove("active")}e&&e.classList.add("active"),t&&n&&(t.addEventListener("click",i),n.addEventListener("click",i))}}t.WinMessage=s},963:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.About=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("div",["about-game"]),this.element.innerHTML='\n      <h1>How to play?</h1>\n      <div class="about__wrapper">\n        <div class="about__wrapper__number">1</div>\n        <div class="about__wrapper__content">Register new player in game</div>\n        <div class="about__wrapper__image one"></div>\n      </div>\n      <div class="about__wrapper" id="little-section">\n        <div class="about__wrapper__number">2</div>\n        <div class="about__wrapper__content">Configure your game settings</div>\n        <div class="about__wrapper__image two"></div>\n      </div>\n      <div class="about__wrapper">\n        <div class="about__wrapper__number">3</div>\n        <div class="about__wrapper__content">Start you new game! Remember card positions and match it before times up.</div>\n        <div class="about__wrapper__image three"></div>\n      </div>\n    '}}t.About=s},638:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("div",["score"]),this.element.innerHTML='\n      <h1>Best players</h1>\n      <div class="score-wrap">\n        <div class="top-score">\n         <div class="top-score__container">\n            <div class="name">Anzhelika Mikulich</div>\n            <div class="email">anzhelika.flyorko@gmail.com</div>\n         </div>\n         <div class="top-score__result">Score: <span class="result-number">120</span></div>\n        </div>\n        <div class="decoration-line"></div>\n      </div>\n    '}}t.Score=s},835:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const i=n(861);class s extends i.BaseComponent{constructor(){super("div",["settings"]),this.element.innerHTML='\n    <h1>Settings</h1>\n    <div class="setting-wrap">\n      <h2>Game cards</h2>\n      <div class="setting-wrap__cards-type">\n         <label>select game cards type</label>\n         <select>\n            <option>4x4</option>\n            <option>6x6</option>\n            <option>7x7</option>\n          </select>\n      </div>\n      <div class="small-decoration-line"></div>\n      <div class="setting__cards-number">\n          <h2>Difficulty</h2>\n          <label>select game type</label>\n           <select>\n              <option>City</option>\n              <option>Animals</option>\n              </select>\n        </div>\n      <div class="small-decoration-line"></div>\n    </div>\n    '}}t.Settings=s}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(387);const e=n(866);window.onload=()=>{const t=document.getElementById("app");if(!t)throw Error("App root element not found");new e.App(t).routing(),new e.App(t).registrPopup(),new e.App(t).startGame()}})()})();